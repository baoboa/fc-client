Name:		@PACKAGE@
Version:	@VERSION@
Release:	1%{?dist}
Summary:	Client-side service for desktop settings deployment

License:	LGPLv2+
URL:		https://github.com/fleet-commander
Source0:	%{name}-%{version}.tar.xz

BuildRequires:	dconf
BuildRequires:	glib2-devel >= 2.36
BuildRequires:	json-glib-devel
BuildRequires:	libsoup-devel >= 2.42
BuildRequires:	systemd

Requires:	dbus
Requires:	dconf

%description
fleet-commander aids in large-scale deployment and management of desktop
settings.  This package is meant for use on a managed client machine.  It
consists of a systemd service that fetches desktop settings from a remote
host and applies them locally.


%prep
%setup -q


%build
%configure
make %{?_smp_mflags}


%install
make install DESTDIR=%{buildroot}

# Don't need to package developer documentation.
rm -rf $RPM_BUILD_ROOT%{_datadir}/gtk-doc/html/fleet-commander


%files
%doc COPYING

%{_libexecdir}/fcmdr-service
%{_prefix}/lib/systemd/system/fleet-commander.service
%{_sysconfdir}/dbus-1/system.d/org.gnome.FleetCommander.conf
%{_datadir}/dbus-1/system-services/org.gnome.FleetCommander.service
%{_sysconfdir}/profile.d/fleet-commander.*


%changelog
* Fri May 30 2014 Matthew Barnes <mbarnes@redhat.com> - @VERSION@-1
- Reference packaging for rpm-based distributions.
